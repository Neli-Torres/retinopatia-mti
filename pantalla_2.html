<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulario previo al an√°lisis</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
  <!-- Encabezado -->
  <div class="flex items-center justify-between border-b pb-4 mb-6 bg-blue-800 text-white p-4 rounded-t-lg">
    <div class="flex items-center gap-2">
      <i class="ph-house-simple-fill text-2xl"></i>
      <h1 class="text-xl font-bold">FORMULARIO PREVIO AL AN√ÅLISIS</h1>
    </div>
    <a href="pantalla_1.html">
      <img src="MTI_JPG.jpg" alt="Logo MTI" class="w-14 h-14 rounded-full">
    </a>
  </div>

  <!-- Contenedor principal -->
  <div class="max-w-2xl mx-auto mt-10 p-6 bg-white shadow-lg rounded-lg">
    <h1 class="text-2xl font-bold text-blue-900 mb-6 text-center">
      Formulario previo al an√°lisis de imagen
    </h1>

    <form id="userForm" class="space-y-6">
      <!-- üß© BLOQUE 1 ‚Äì Datos personales del paciente -->
      <div class="border border-gray-200 rounded-lg p-4">
        <h2 class="text-lg font-semibold text-blue-800 mb-3">Datos personales del paciente</h2>

        <!-- Edad -->
        <div class="mb-3">
          <label class="block mb-1 font-medium">Edad</label>
          <input
            type="number"
            name="edad"
            required
            class="w-full border border-gray-300 rounded p-2"
          >
        </div>

        <!-- Sexo -->
        <div class="mb-3">
          <label class="block mb-1 font-medium">Sexo</label>
          <select
            name="genero"
            required
            class="w-full border border-gray-300 rounded p-2"
          >
            <option value="">Selecciona una opci√≥n</option>
            <option value="Femenino">Femenino</option>
            <option value="Masculino">Masculino</option>
            <option value="Otro">Otro</option>
          </select>
        </div>

        <!-- Estado -->
        <div class="mb-3">
          <label class="block mb-1 font-medium">Estado de la Rep√∫blica donde reside</label>
          <select
            name="estado"
            required
            class="w-full border border-gray-300 rounded p-2"
          >
            <option value="">Selecciona un estado</option>
            <option value="Aguascalientes">Aguascalientes</option>
            <option value="Baja California">Baja California</option>
            <option value="Baja California Sur">Baja California Sur</option>
            <option value="Campeche">Campeche</option>
            <option value="Chiapas">Chiapas</option>
            <option value="Chihuahua">Chihuahua</option>
            <option value="Ciudad de M√©xico">Ciudad de M√©xico</option>
            <option value="Coahuila">Coahuila</option>
            <option value="Colima">Colima</option>
            <option value="Durango">Durango</option>
            <option value="Estado de M√©xico">Estado de M√©xico</option>
            <option value="Guanajuato">Guanajuato</option>
            <option value="Guerrero">Guerrero</option>
            <option value="Hidalgo">Hidalgo</option>
            <option value="Jalisco">Jalisco</option>
            <option value="Michoac√°n">Michoac√°n</option>
            <option value="Morelos">Morelos</option>
            <option value="Nayarit">Nayarit</option>
            <option value="Nuevo Le√≥n">Nuevo Le√≥n</option>
            <option value="Oaxaca">Oaxaca</option>
            <option value="Puebla">Puebla</option>
            <option value="Quer√©taro">Quer√©taro</option>
            <option value="Quintana Roo">Quintana Roo</option>
            <option value="San Luis Potos√≠">San Luis Potos√≠</option>
            <option value="Sinaloa">Sinaloa</option>
            <option value="Sonora">Sonora</option>
            <option value="Tabasco">Tabasco</option>
            <option value="Tamaulipas">Tamaulipas</option>
            <option value="Tlaxcala">Tlaxcala</option>
            <option value="Veracruz">Veracruz</option>
            <option value="Yucat√°n">Yucat√°n</option>
            <option value="Zacatecas">Zacatecas</option>
          </select>
        </div>

        <!-- Altura -->
        <div class="mb-3">
          <label class="block mb-1 font-medium">Altura (cm)</label>
          <input
            type="number"
            name="altura"
            step="0.1"
            required
            class="w-full border border-gray-300 rounded p-2"
          >
        </div>

        <!-- Peso -->
        <div class="mb-4">
          <label class="block mb-1 font-medium">Peso (kg)</label>
          <input
            type="number"
            name="peso"
            step="0.1"
            required
            class="w-full border border-gray-300 rounded p-2"
          >
        </div>

        <!-- Afiliaci√≥n a sistema de salud (personal) -->
        <div>
          <label class="block mb-1 font-medium">
            ¬øA qu√© sistema de salud se encuentra afiliado(a) actualmente?
          </label>
          <select
            name="afiliacion"
            class="w-full border border-gray-300 rounded p-2"
          >
            <option value="">Seleccione una opci√≥n</option>
            <option value="IMSS">IMSS</option>
            <option value="ISSSTE">ISSSTE</option>
            <option value="INSABI">INSABI</option>
            <option value="PEMEX">PEMEX</option>
            <option value="SEDENA_SEMAR">SEDENA / SEMAR</option>
            <option value="Privado">Servicio privado</option>
            <option value="No_cuenta">No cuenta con afiliaci√≥n</option>
            <option value="Otro">Otro</option>
          </select>
        </div>
      </div>

      <!-- üß© BLOQUE 2 ‚Äì Antecedentes personales -->
      <div class="border border-gray-200 rounded-lg p-4">
        <h2 class="text-lg font-semibold text-blue-800 mb-3">Antecedentes personales</h2>

        <!-- Diagn√≥stico de diabetes -->
        <div class="mb-3">
          <label class="block mb-1 font-medium">¬øTiene diagn√≥stico de diabetes?</label>
          <select
            name="diabetes"
            required
            class="w-full border border-gray-300 rounded p-2"
            onchange="toggleDiabetesInfo(this.value)"
          >
            <option value="">Selecciona una opci√≥n</option>
            <option value="No">No</option>
            <option value="S√≠">S√≠</option>
          </select>
        </div>

        <!-- Info adicional solo si tiene diabetes -->
        <div id="diabetesInfo" class="hidden space-y-3">
          <div>
            <label class="block mb-1 font-medium">Tipo de diabetes</label>
            <select
              name="tipo_diabetes"
              class="w-full border border-gray-300 rounded p-2"
            >
              <option value="">Selecciona tipo</option>
              <option value="Tipo 1">Tipo 1</option>
              <option value="Tipo 2">Tipo 2</option>
              <option value="Gestacional">Gestacional</option>
            </select>
          </div>

          <div>
            <label class="block mb-1 font-medium">A√±os desde el diagn√≥stico</label>
            <input
              type="number"
              name="anios_con_diabetes"
              class="w-full border border-gray-300 rounded p-2"
            >
          </div>
        </div>
      </div>

      <!-- üß© BLOQUE 3 ‚Äì Antecedentes familiares -->
      <div class="border border-gray-200 rounded-lg p-4">
        <h2 class="text-lg font-semibold text-blue-800 mb-3">Antecedentes familiares</h2>

        <!-- Familiar con diabetes -->
        <div class="mb-3">
          <label class="block mb-1 font-medium">¬øAlg√∫n familiar directo padece diabetes?</label>
          <select
            name="familiar_diabetes"
            required
            class="w-full border border-gray-300 rounded p-2"
            onchange="toggleFamiliaInfo(this.value)"
          >
            <option value="">Selecciona una opci√≥n</option>
            <option value="S√≠">S√≠</option>
            <option value="No">No</option>
            <option value="No sabe">No sabe</option>
          </select>
        </div>

        <!-- Detalles solo si responde S√≠ -->
        <div id="familiaInfo" class="hidden space-y-3">
          <div>
            <label class="block mb-1 text-sm font-medium">
              Parentesco del familiar con diabetes
            </label>
            <select
              name="linea_familiar"
              class="w-full border border-gray-300 rounded p-2"
            >
              <option value="">Seleccione una opci√≥n</option>
              <option value="Madre">Madre</option>
              <option value="Padre">Padre</option>
              <option value="Hermano(a)">Hermano(a)</option>
              <option value="Abuelo(a)">Abuelo(a)</option>
              <option value="T√≠o(a)">T√≠o(a)</option>
              <option value="Primo(a)">Primo(a)</option>
              <option value="Hijo(a)">Hijo(a)</option>
              <option value="Otro">Otro</option>
            </select>
          </div>

          <div>
            <label class="block mb-1 text-sm font-medium">
              Tipo de diabetes del familiar
            </label>
            <select
              name="tipo_diabetes_familiar"
              class="w-full border border-gray-300 rounded p-2"
            >
              <option value="">Seleccione una opci√≥n</option>
              <option value="Tipo 1">Tipo 1</option>
              <option value="Tipo 2">Tipo 2</option>
              <option value="Gestacional">Gestacional</option>
              <option value="No sabe">No sabe / No especifica</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Consentimiento -->
      <div>
        <label class="inline-flex items-center text-sm">
          <input
            type="checkbox"
            name="consentimiento"
            required
            class="mr-2"
          >
          Autorizo el uso y almacenamiento de mis datos y fotograf√≠as exclusivamente con fines estad√≠sticos,
          de an√°lisis acad√©mico y mejora continua del sistema.
        </label>
      </div>

      <!-- Bot√≥n -->
      <div class="pt-2">
        <button
          type="submit"
          class="bg-blue-700 text-white px-6 py-2 rounded hover:bg-blue-800"
        >
          Enviar y continuar
        </button>
      </div>
    </form>
  </div>

  <!-- Scripts -->
  <script>
    function toggleDiabetesInfo(value) {
      const diabetesInfo = document.getElementById("diabetesInfo");
      diabetesInfo.classList.toggle("hidden", value !== "S√≠");
    }

    function toggleFamiliaInfo(value) {
      const familiaInfo = document.getElementById("familiaInfo");
      familiaInfo.classList.toggle("hidden", value !== "S√≠");
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="conexion_supabase.js"></script>
</body>
</html>

